<!DOCTYPE html>
<html>
  <head><title>發文系統</title></head>
  <body>
    <h1>貼文牆</h1>
    <textarea id="content"></textarea>
    <button onclick="submitPost()">發文</button>
    <ul id="postList"></ul>

    <script>
      async function fetchPosts() {
        const res = await fetch('http://localhost:5000/api/posts');
        const posts = await res.json();
        const list = document.getElementById('postList');
        list.innerHTML = posts.map(p => `<li>${p.author}: ${p.content}</li>`).join('');
      }

      async function submitPost() {
        const content = document.getElementById('content').value;
        await fetch('http://localhost:5000/api/posts', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ author: '匿名', content })
        });
        fetchPosts();
      }

      fetchPosts();
    </script>
  </body>
</html>
